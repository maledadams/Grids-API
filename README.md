# Grids-API
Proyecto Final modulo 3 - AA

## Install Dependencies

npm i -D typescript ts-node @types/node @types/express @types/cors

## Run

npm run dev

## Tabla de Cambios

| codigo                                | solucion                                                                                                                                                                                                                                                                   | como lo logre y la solucion o feature                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| ------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| grid debe devolver color              | Antes se devolvia el objeto `grid`. lo cual necesitaba regresar un `string` con el color de ese grid                                                                                                                                                                       | **Mal** `return grid`<br><br>**Bien** `return grid.color`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| los limites causaban un desborde      | se usaba `<=` lo cual suma una fila o columna extra, habia que usar `<`                                                                                                                                                                                                    | **Mal** `x <= origin.x + width` <br><br>**Bien** `x < origin.x + width`<br>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| tamano del tablero ignoraba el origen | Solo se miraba `width` y `height`. pero se debia sumar origen + tama√±o para poder poner la matriz bien en tablero                                                                                                                                                          | **Mal** `topX = Math.max(topX, grid.width)``topY = Math.max(topY, grid.height)`<br><br>**Bien** `maxX = Math.max(maxX, g.origin.xPosition + g.width)``maxY = Math.max(maxY, g.origin.yPosition + g.height)`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| pinta solo los activos                | filtra los valores agregados antes de calcular los colores                                                                                                                                                                                                                 | **Bien** `const active = Grids.filter(g => g.isActive)``CalculateIntersection(pt, active)`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| orden de bucles                       | hice que recorriera `y` de arriba a abajo y `x` de izquierda a derecha. hice que la etiqueta debiera de ser `[y,x]`                                                                                                                                                        | **Bien** `for (let y = maxY - 1; y >= 0; y--) {` `for (let x = 0; x < maxX; x++) {` `cells += \`[${y},${x}]``<br>` }`<br>`}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| color default                         | el vacio debe ser blanco por default para no confundir                                                                                                                                                                                                                     | **Bien** `const color = CalculateIntersection(pt, active) ?? "white"`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| errores HTML                          | yo evite `display="flex"` ya que es un termino de CSS y no de HTML y quito comillas extra en `value`                                                                                                                                                                       | **Mal** `<div display="flex">``<input value="0"">`<br><br>**Bien** `<div style="display:flex">``<input value="0">`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| toggle de un grid                     | agregue una ruta que invierte `isActive` por indice, asi cambiandole el color al grid que queramos                                                                                                                                                                         | **Ruta** `app.patch("/grids/:index/toggle", (req, res) => {` `const i = Number(req.params.index)` `Grids[i].isActive = !Grids[i].isActive` `res.send({ index: i, isActive: Grids[i].isActive })``})`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| exportar y importar JSON              | hice una ruta que envia un archivo descargable de los grids (el 2 es para la indentacion del pretty printing)<br><br>y tambien hice un import GET con HTML y un import POST que valida los requerimientos necesarios, remplaza el archivo y hace redirect a /grids/display | **Ruta** `app.get("/export", (_req, res) => {` `const data = JSON.stringify({ exportedAt: new Date().toISOString(), grids: Grids }, null, 2)` `res.setHeader("Content-Type", "application/json")` `res.setHeader("Content-Disposition", "attachment; filename=grids-export.json")` `res.send(data)``})`<br><br>**Ruta** `app.post("/import", (req: Request, res: Response) => {` `const incoming = req.body as { exportedIn?: string; grids?: any }` `const list = Array.isArray(incoming?.grids) ? incoming.grids : null` `if (!list) { res.status(400).send({ error: "invalid" })`<br>`return } const cleaned: Grid[] = []for (const g of list) {`<br>`const ok = g && typeof g.color === "string" && typeof g.isActive === "boolean" && g.origin && Number.isFinite(g.origin.xPosition) && Number.isFinite(g.origin.yPosition) && Number.isFinite(g.width) && Number.isFinite(g.height)` |
| Botones                               | en la pagina no habian botones asi que agrege los botones de delete y toggle con HTML                                                                                                                                                                                      | **Ruta (del delete)** `app.delete("/grids/:index", (req: Request, res: Response) => { const idx = Number(req.params.index)` `if (Number.isNaN(idx) \|\| idx < 0 \|\| idx >= Grids.length) {`<br>`res.status(404).send({ error: "grid not found" })`<br>`return} Grids.splice(idx, 1) res.status(200).send({ deletedIndex: idx }) })`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| tamano de los cells                   | hice que los cells fueran mas grandes                                                                                                                                                                                                                                      | **Ruta** `<div style="background-color:${color}; height:60px; width:60px; border:1px solid black; display:flex; align-items:center; justify-content:center;">[${y},${x}]</div>`<br> <br>**Ruta** <br>`+ <div style="display:grid; grid-template-columns: repeat(${maxX}, 60px); margin-bottom:60px;">`<br>`<br>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| zoom in zoom out y moverdera          | este lo hice con un poco de vibe coding ya que ni idea tenia de como hacerlo y ya agregue muchos features por mi cuenta                                                                                                                                                    | --                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
# Links

http://localhost:8083/grids
http://localhost:8083/grids/display
http://localhost:8083/export
http://localhost:8083/import
